env:
  global:
    - secure: J8QvWawnjKHqz5KRL31B90WuVAv19zdcidrzD21e+EhxruI8J56IRR4v3t8ntcFfqdy+ZfPkfTJrJOKfsAA3fqbeHQ1Uz2y+qIHl1ply9VizTr+SWZcTC7pge0w8T8Sq/Xx7GzZhFTwdGhbbC0Zt/WcEMs9MYvhsDJvh6enp9f12swJhEssOxjqGeU6k7u8MeHFEBSUgBNBdZexNlSCaOBwGjIanj7EnPhAMkyYhdN0HzKK9wqWbhJg9e5iLweSvnnFiBjjFgGZyLs9493Eo2BdUyRDnujAYHxVmbceYNmM/yKDA3BO14UOJiiOm8BRboD7lwGUjONNNuW+9NcIkLWr1HnQv81sTFyb0SssFZogKCin5LJc0mUleXjBXNVO0A0cJyWrhG4rC3PHHMey0PuoV/DVrZwRkD7SmqKMSy414A7dyOQrq0pxsxjoYNZ7NuF7g3tBIT9LArEnjfZ7PwW9076VtyAlbVFEJjcg0QMNMXcRZUQnLPgtVfROaA9f2qLuwCEorFufQNI/VVsdB+YagyQ8aPoQBlcNe9iiceQ5wE3Zmh2wkI7Vzu3xn9qM9Izl9gMUL0oFYH9CMpdsfDZZZfiQ8jY/qwQZ9ozlTkKwDrtealnl2/Cch/wwMatfPSS1GRSJK8n9iuTD4KoTTWNZOixhJ/1+/LhbBT82x3NQ=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hpHosts---Ad-and-Tracking_web_hosts-file.net
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
