env:
  global:
    - secure: I5G4kJ0EcfPYCrxryAn8TiD+GOL5vp4QyBYTFnPY6P57gZ0z6MDnpFBYYZyn8YOtvsSwqfi8y+EGL0g/YQ4dinbkFl8xUiQrcndS0MrZbtwGj4dqzx/Eqpxsaq168gijeU+8zXkOshfEnmaheUlmZtPeZm9J5G+jmZYBxd6Bfqtl86LR8se41rxdZ7rzpCm9VhxsXHaFZ210R5mwKfP+9B6y8hkCktn6LOf7ZzkGpvXKYq+subTjsrmSWRwyiOudUWCHUgjIlctIiT94hXeP/DvfUhvA2h670ZNCSdRxnVGXiuIELcLNDhF2xzLMiQR2e+v2McUnXqF4rZP4ue8DHvhmn+8mkFHFd+kFKR4L/9zg+kLn7ytyanthf2Ti63rkeXm64x/agRXVfsjtKNOXa/CQrPBXfNmniT4lFijKFgAx+2LJ6y8Mm4p1hqmkFx1d8/9qCOYVWVFez8Q3+4GTGE4JtzBoVZYP7gSzocbJS0cd1s2S2rMFdNmZQZk/DJtaH/OefpSV0Ag6WZTXBqmqzDST42MFYBKjh6GKFnflTs5u6IiiS06gJXtI/G0D3zFvuiKBh/NiYsvmKyhNDldOtRiIn3wLiD6hQmo3tm8tLw2H8CDuFI36k1ydN65gfllzRFB3NKko6yFsuxBHFi2fCz7fhrtYhYSyDFIXXFNYuKY=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hpHosts---Ad-and-Tracking_web_hosts-file.net
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
